apply plugin: 'com.android.library'

def globalConf = rootProject.ext

android {
    compileSdkVersion globalConf.androidCompileSdkVersion
    buildToolsVersion globalConf.androidBuildToolsVersion
    publishNonDefault true
    defaultConfig {
        ext.buildNumber = globalConf.appBuildNumber
        minSdkVersion globalConf.androidMinSdkVersion
        targetSdkVersion globalConf.androidTargetSdkVersion
        multiDexEnabled true
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }

    dexOptions {
        javaMaxHeapSize "4g"
    }


    buildTypes {
        release {
            minifyEnabled false
            shrinkResources true
            testCoverageEnabled false
            ext.enableCrashlytics = true
        }

    }

    productFlavors {
        production {
        }
        xWalk {
//            minSdkVersion globalConf.crosswalkBuildMinSdkVersion

        }

    }

    lintOptions {
        abortOnError false
    }


    packagingOptions {
        exclude 'LICENSE.txt'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/ASL-2.0.txt'
        exclude 'META-INF/LGPL-3.0.txt'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/LICENSE-FIREBASE.txt'
        pickFirst 'draftv3/schema'
        pickFirst 'draftv4/schema'
    }
}

dependencies {
//    compile fileTree(include: ['*.jar'], dir: 'libs')

    Map<String, String> dependencies = globalConf.dependencies;


    compile dependencies.multidex
    compile dependencies.cardView
    compile dependencies.supportLibrary
    compile dependencies.glide
    compile dependencies.roundImageview
    compile dependencies.playServicesFcm
    compile dependencies.playServicesLocation
    compile dependencies.playServicesAnalytics


    //Genie Sdk modules
    compile dependencies.genieproviders
    compile dependencies.genieIntegration
//    compile "com.google.code.gson:gson:2.8.2"
//    compile "joda-time:joda-time:2.9.9"
//    compile "org.greenrobot:eventbus:3.1.1"
//    compile "com.google.android.gms:play-services-location:9.4.0"
//    compile "com.squareup.okhttp3:okhttp:3.9.1"
//    compile(name:'genie-integration-1.0.local',ext:'aar')
//    compile(name:'genie-providers-1.0.local',ext:'aar')
//    compile(name:'genie-services-1.0.local',ext:'aar')

    //Content player modules
    compile dependencies.cordova

    // xWalk shared mode
    compile dependencies.gcSharedXwalk

    //Only for Content-Player dev
//    compile(name:'geniecanvas-local-debug',ext:'aar')
//    compile(name:'CordovaLib',ext:'aar')

//     xWalk shared mode lib
    productionCompile dependencies.xWalkSharedLib
    compile "com.squareup.okhttp3:okhttp:3.9.1"

//     xWalk lib
//    xWalkCompile dependencies.xWalkCore
//    qaxWalkCompile dependencies.xWalkCore

    //Debug dependencies
    debugCompile dependencies.stetho
    debugCompile dependencies.stethoOkhttp

    //Test dependencies
    androidTestCompile dependencies.mockWebServer
    androidTestCompile dependencies.supportAnnotation
    androidTestCompile dependencies.uiAutomator
    androidTestCompile dependencies.testRunner
    androidTestCompile dependencies.espressoCore
    androidTestCompile(dependencies.espressoContrib) {
        exclude group: 'com.android.support', module: 'design'
        exclude group: 'com.android.support', module: 'support-v4'
        exclude group: 'com.android.support', module: 'support-annotations'
        exclude module: 'recyclerview-v7'
    }
    androidTestCompile dependencies.espressoIntents
}










